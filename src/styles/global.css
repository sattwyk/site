@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
  --font-sans:
    "Inter", ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", "Noto Color Emoji";
  --font-serif: "Lora", ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;

  /* Custom animation timings */
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
}

@custom-variant dark (&:where(.dark, .dark *));

/* Smooth scrolling */
html {
  overflow-y: scroll;
  color-scheme: light;
  scroll-behavior: smooth;
  @apply bg-stone-100;
}

html.dark {
  color-scheme: dark;
  @apply bg-stone-950;
}

html,
body {
  @apply size-full;
}

body {
  @apply font-sans antialiased;
  @apply flex flex-col;
  @apply bg-stone-100 dark:bg-stone-950;
  @apply text-black/60 dark:text-white/70;
}

/* Subtle gradient background */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 100vh;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(120, 119, 198, 0.1), transparent);
  pointer-events: none;
  z-index: -1;
}

.dark body::before {
  background: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(120, 119, 198, 0.15), transparent);
}

header {
  @apply fixed top-0 left-0 right-0 z-50 py-5;
  @apply bg-stone-100/80 dark:bg-stone-950/80;
  @apply backdrop-blur-md saturate-150;
  @apply border-b border-transparent;
  @apply transition-all duration-300 ease-out;
}

html.scrolled header {
  @apply py-3;
  @apply border-stone-200/50 dark:border-stone-800/50;
  @apply shadow-sm shadow-stone-900/5 dark:shadow-stone-900/20;
}

main {
  @apply flex-1 py-32;
  view-transition-name: main-content;
}

footer {
  @apply py-5 text-sm;
}

article {
  @apply max-w-full prose dark:prose-invert prose-img:mx-auto prose-img:my-auto;
  @apply prose-headings:font-semibold prose-p:font-serif;
  @apply prose-headings:text-black prose-headings:dark:text-white;
}

/* Improved article link styles */
@layer utilities {
  article a {
    @apply font-sans text-current underline underline-offset-2;
    @apply decoration-black/20 dark:decoration-white/30;
    @apply transition-all duration-300 ease-out;
  }
  article a:hover {
    @apply text-black dark:text-white;
    @apply decoration-black/40 dark:decoration-white/50;
    @apply underline-offset-4;
  }
}

/* Enhanced stagger animations */
.animate {
  @apply opacity-0;
  transform: translateY(12px);
  transition:
    opacity 0.8s cubic-bezier(0.19, 1, 0.22, 1),
    transform 0.8s cubic-bezier(0.19, 1, 0.22, 1);
}

.animate.show {
  @apply opacity-100;
  transform: translateY(0);
}

/* Back to top button */
html #back-to-top {
  @apply opacity-0 pointer-events-none;
  transform: translateY(10px);
  transition:
    opacity 0.4s ease-out,
    transform 0.4s ease-out;
}

html.scrolled #back-to-top {
  @apply opacity-100 pointer-events-auto;
  transform: translateY(0);
}

/* View Transitions API - prevent white flash */
::view-transition {
  background-color: transparent;
}

::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}

::view-transition-old(main-content),
::view-transition-new(main-content) {
  animation-duration: 0.3s;
  animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

::view-transition-old(main-content) {
  animation-name: fade-out;
}

::view-transition-new(main-content) {
  animation-name: fade-in;
}

@keyframes fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Card hover effect */
.card-hover {
  @apply transition-all duration-300 ease-out;
}

.card-hover:hover {
  transform: translateY(-2px);
  @apply shadow-lg shadow-stone-900/5 dark:shadow-stone-900/30;
}

/* Text selection - vibrant and visible */
::selection {
  @apply bg-indigo-500/30 text-black;
}

.dark ::selection {
  @apply bg-indigo-400/40 text-white;
}

/* Custom cursor styles */
html {
  cursor: default;
}

/* Interactive elements cursor */
a,
button,
[role="button"],
input[type="submit"],
input[type="button"],
select {
  cursor: pointer;
}

/* Text input cursor */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
textarea {
  cursor: text;
  caret-color: theme("colors.indigo.500");
}

.dark input[type="text"],
.dark input[type="email"],
.dark input[type="password"],
.dark input[type="search"],
.dark textarea {
  caret-color: theme("colors.indigo.400");
}

/* Focus states */
:focus-visible {
  @apply outline-none ring-2 ring-indigo-400 dark:ring-indigo-500 ring-offset-2 ring-offset-stone-100 dark:ring-offset-stone-950;
  @apply rounded-sm;
}

/* Smooth image loading */
img {
  @apply transition-opacity duration-500 ease-out;
}

/* Interactive element hover effects */
a,
button {
  @apply transition-all duration-200 ease-out;
}

a:active,
button:active {
  transform: scale(0.98);
}

/* Subtle text gradient for headings on hover */
.heading-gradient {
  background: linear-gradient(135deg, currentColor 0%, currentColor 100%);
  background-clip: text;
  -webkit-background-clip: text;
  transition: all 0.3s ease-out;
}

.heading-gradient:hover {
  background: linear-gradient(135deg, #1f1f1f 0%, #4a4a4a 100%);
}

.dark .heading-gradient:hover {
  background: linear-gradient(135deg, #ffffff 0%, #d4d4d4 100%);
}
